import { f as f$1, o as of, a as af, q, b as ff, c as cf } from '../chunks/react-973b5697.js';
import { r, l as l$1 } from '../chunks/index-c9938791.js';
import { o, l } from '../chunks/index-6f38244c.js';
import '../chunks/browser-polyfill-bbb70053.js';

var i={exports:{}},p={},x=f$1.exports,u=Symbol.for("react.element"),h=Symbol.for("react.fragment"),j=Object.prototype.hasOwnProperty,b=x.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,m={key:!0,ref:!0,__self:!0,__source:!0};function f(e,t,r){var s,n={},o=null,a=null;for(s in void 0!==r&&(o=""+r),void 0!==t.key&&(o=""+t.key),void 0!==t.ref&&(a=t.ref),t)j.call(t,s)&&!m.hasOwnProperty(s)&&(n[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===n[s]&&(n[s]=t[s]);return {$$typeof:u,type:e,key:o,ref:a,props:n,_owner:b.current}}p.Fragment=h,p.jsx=f,p.jsxs=f,i.exports=p;const g=new Set(["input","textarea","select"]),k={value:{handler:"onChange",getValue:e=>e.target.value,defaultValue:""}},v=Object.assign({checked:{handler:"onChange",getValue:e=>e.target.checked}},k),y=new Proxy({},{get(r,s){if(!r[s]){const n=f$1.exports.forwardRef(((t,r)=>{const n={...t};return !r||!o(r)&&l(r)||(n.ref=r),f$1.exports.createElement(s,n)}));r[s]=of(n,g.has(s)?"input"===s?v:k:void 0);}return r[s]}}),_=async()=>await l$1("auth","packageInstallAccessTokens"),O=e=>r("auth","packageInstallAccessTokens",e);var w=af((()=>{var e;const t=ff(_),r={packageInstallId:"",token:""},o=ff(r),a=ff(!1),l=cf((()=>a.get()?"text":"password")),c=(e,r)=>{t.set((t=>Object.assign(Object.assign({},t),{[e]:r}))),O(t.peek());};return i.exports.jsxs("table",{className:"c-auth-token-table",children:[i.exports.jsx("thead",{children:i.exports.jsxs("tr",{children:[i.exports.jsx("th",{children:"Package Install ID"}),i.exports.jsx("th",{children:"Token"}),i.exports.jsx("th",{style:{textAlign:"left"},children:i.exports.jsx("button",{onClick:()=>{a.set((e=>!e));},children:a.get()?"Hide":"Show"})})]})}),i.exports.jsxs("tbody",{children:[Object.entries(null!==(e=t.get())&&void 0!==e?e:{}).map((([e])=>i.exports.jsxs("tr",{children:[i.exports.jsx("td",{children:e}),i.exports.jsx("td",{children:i.exports.jsx(y.input,{value$:t[e],type$:l})}),i.exports.jsxs("td",{children:[i.exports.jsx("button",{onClick:()=>c(e,t[e].peek()),children:"Set"}),i.exports.jsx("button",{onClick:()=>{return r=e,t.set((e=>{const t=Object.assign({},e);return delete t[r],t})),void O(t.peek());var r;},children:"Delete"})]})]},e))),i.exports.jsxs("tr",{children:[i.exports.jsx("td",{children:i.exports.jsx(y.input,{value$:o.packageInstallId,placeholder:"00000000-0000-0000-0000-000000000000"})}),i.exports.jsx("td",{children:i.exports.jsx(y.input,{value$:o.token,type$:l,placeholder:"token"})}),i.exports.jsx("td",{children:i.exports.jsx("button",{onClick:()=>{const{packageInstallId:e,token:t}=o.peek();c(e,t),o.set(r);},children:"Add"})})]})]})]})}));function E(){return i.exports.jsxs("div",{className:"c-auth-token-table-wrapper",children:[i.exports.jsx("h2",{children:"Auth tokens"}),i.exports.jsx("p",{children:"Each configured package-install can access a package-install-scoped auth token."}),i.exports.jsx(w,{})]})}function S(e,t){void 0===t&&(t={});var r=t.insertAt;if(e&&"undefined"!=typeof document){var s=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===r&&s.firstChild?s.insertBefore(n,s.firstChild):s.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e));}}var N="table-module_c-dev-embed-table__-9bi2";S(".table-module_c-dev-embed-table__-9bi2 {\n  padding: 6px;\n  border: solid 1px white;\n  border-radius: 4px;\n}\n\n.table-module_c-dev-embed-table__-9bi2 > tbody {\n  padding: 6px;\n  border: solid 1px white;\n  border-radius: 4px;\n}\n");const C={url:"http://localhost:8080",authToken:"AUTH_TOKEN",contentPageType:"youtubeVideo",parentQuerySelector:"#above-the-fold",defaultStyles:{width:"100%",height:"300px"}},I=e=>{try{return JSON.parse(e),!1}catch(e){return e instanceof Error?e.message:"An unknown error occurred"}};var T=af((()=>{var e;const t=ff($),r=ff(JSON.stringify(C,null,2)),n=()=>{A(t.peek());};return i.exports.jsxs("table",{className:N,children:[i.exports.jsx("thead",{children:i.exports.jsx("tr",{children:i.exports.jsx("th",{children:"Embed Config"})})}),i.exports.jsxs("tbody",{children:[Object.entries(null!==(e=t.get())&&void 0!==e?e:{}).map((([e])=>i.exports.jsxs("tr",{children:[i.exports.jsxs("td",{children:[i.exports.jsxs("p",{children:[i.exports.jsx("strong",{children:"Embed ID: "}),e]}),i.exports.jsx(y.textarea,{rows:10,cols:40,value$:t[e]})]}),i.exports.jsxs("td",{children:[i.exports.jsx("button",{onClick:n,children:"Save"}),i.exports.jsx("button",{onClick:()=>(e=>{t.set((t=>{const r=Object.assign({},t);return delete r[e],r})),n();})(e),children:"Delete"})]})]},e))),i.exports.jsxs("tr",{children:[i.exports.jsxs("td",{children:[i.exports.jsx("h4",{children:"New embed"}),i.exports.jsx(y.textarea,{rows:10,cols:40,value$:r}),i.exports.jsx("p",{children:I(r.get())})]}),i.exports.jsx("td",{children:i.exports.jsx("button",{onClick:()=>{let e=!1;t.set((t=>{const s=Object.assign({},t),n=`dev-${crypto.randomUUID()}`;s[n]=r.peek();try{return JSON.parse(s[n]),s}catch(r){return e=!0,alert("Error adding embed. Please input valid JSON."),t}})),e||(A(t.peek()),r.set(JSON.stringify(C,null,2)));},children:"Add"})})]})]})]})}));async function $(){const e=await l$1("embed","devEmbeds"),t=Object.entries(e).map((([e,t])=>[e,JSON.stringify(t,null,2)]));return Object.fromEntries(t)}async function A(e){let t=!1;const r$1=Object.entries(e).map((([e,r])=>{try{return [e,JSON.parse(r)]}catch(r){return t=!0,alert(`Error saving ${e}. Please input valid JSON.`),[e,{}]}}));if(t)return;const s=Object.fromEntries(r$1);return await r("embed","devEmbeds",s)}function J(){return i.exports.jsxs("div",{className:"c-dev-embed-table-wrapper",children:[i.exports.jsx("h2",{children:"Dev Embeds"}),i.exports.jsx("p",{children:"Manage your dev embeds here."}),i.exports.jsx(T,{})]})}var D="app-module_c-app__JGVvb";S(".app-module_c-app__JGVvb {\n  font-family: sans-serif;\n  background: black;\n  color: white;\n}\n");const P=document.getElementById("root");P&&q.exports.render(i.exports.jsx((function(){return i.exports.jsxs("div",{className:D,children:[i.exports.jsx("h1",{children:"Truffle Devtools"}),i.exports.jsx(E,{}),i.exports.jsx(J,{})]})}),{}),P);
