(()=>{"use strict";var t,e={9612:(t,e,n)=>{function a(t,e){const n=t.lastIndexOf(".");let a=e;if(-1!==n){a=t.substring(n+1);const e=a.indexOf("?");-1!==e&&(a=a.substring(0,e))}return a}function o({onJson:t,onRequest:e,waitForBasename:n}){setTimeout((()=>{const a={};let o="",s=!1;if(void 0!==t){const e=JSON.parse;JSON.parse=function(){const n=e.apply(this,arguments);let i=!1,r=!1;return t?.(n,(t=>{const e=window.location.pathname;void 0===a[e]&&(a[e]=[]),void 0===a[e].find((e=>e.label===t.label&&e.language===t.language))&&(a[e].push(t),i=!0)}),(t=>{o=t,r=!0})),s&&(i||r)&&document.dispatchEvent(new CustomEvent("asbplayer-synced-data",{detail:{error:"",basename:o,subtitles:a[window.location.pathname]}})),n}}document.addEventListener("asbplayer-get-synced-data",(async()=>{e?.((t=>{const e=window.location.pathname;void 0===a[e]&&(a[e]=[]),void 0===a[e].find((e=>e.label===t.label&&e.language===t.language))&&a[e].push(t)}),(t=>{o=t,s||document.dispatchEvent(new CustomEvent("asbplayer-synced-data",{detail:{error:"",basename:o,subtitles:void 0}}))}));const t=()=>(!n||""!==o)&&window.location.pathname in a;t()||await function(t,e=1e4){return new Promise((async(n,a)=>{t()&&n(!0);const o=Date.now();let s=!1;for(;!s&&Date.now()<o+e;)await new Promise((e=>{setTimeout((()=>{s=t(),e()}),1e3)}));n(s)}))}(t),document.dispatchEvent(new CustomEvent("asbplayer-synced-data",{detail:{error:"",basename:o,subtitles:a[window.location.pathname]??[]}})),function(){for(const t of Object.keys(a))t!==window.location.pathname&&delete a[t]}(),s=!0}),!1)}),0)}n.d(e,{UC:()=>o,YU:()=>a})}},n={};function a(t){var o=n[t];if(void 0!==o)return o.exports;var s=n[t]={exports:{}};return e[t](s,s.exports,a),s.exports}a.d=(t,e)=>{for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(0,(t=a(9612)).UC)({onJson:(e,n)=>{if(e?.data?.subtitles instanceof Array)for(const a of e.data.subtitles)if("string"==typeof a.lang&&"string"==typeof a.lang_key&&("object"==typeof a.srt&&"string"==typeof a.srt.url||"string"==typeof a.url)){const e=a.srt?.url??a.url,o=(0,t.YU)(e,"srt");n({label:a.lang,language:a.lang_key,url:e,extension:"json"===o?"bbjson":o})}},onRequest:(t,e)=>{e(document.title)},waitForBasename:!1})})();